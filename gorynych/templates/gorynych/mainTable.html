{% extends 'gorynych/main.html' %}

{% block mainTable %}

<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
ul, #myUL {
  list-style-type: none;
}

#myUL {
  margin: 0;
  padding: 0;
}

.caret {
  cursor: pointer;
  -webkit-user-select: none; /* Safari 3.1+ */
  -moz-user-select: none; /* Firefox 2+ */
  -ms-user-select: none; /* IE 10+ */
  user-select: none;
}

.caret::before {
  content: "\25B6";
  color: black;
  display: inline-block;
  margin-right: 6px;
}

.caret-down::before {
  -ms-transform: rotate(90deg); /* IE 9 */
  -webkit-transform: rotate(90deg); /* Safari */'
  transform: rotate(90deg);  
}

.nested {
  display: none;
}

.active {
  display: block;
}
</style>

</head>

<body>

<h2>Title</h2>
<p>description</p>

<button onclick="crEle()">Создать элемент</button>
<p>
<ul id="myUL">
  <li><span class="caret"></span><input placeholder="Наименование" value="Состав"></input><button onclick='crFunc()'>+</button>
    <ul class="nested">
      <li><span class="caret"></span><input placeholder="Наименование" value="Элемент1"></input><button onclick='crFunc()'>+</button>
        <ul class="nested"></ul>
      </li>
      <li><span class="caret"></span><input placeholder="Наименование" value="Элемент2"></input><button onclick='crFunc()'>+</button>
        <ul class="nested"></ul>
      </li>
      <li><span class="caret"></span><input placeholder="Наименование" value="Интерфейсы"></input><button onclick='crFunc()'>+</button>
        <ul class="nested">
          <li><span class="caret"></span><input placeholder="Наименование" value="USB"></input><button onclick='crFunc()'>+</button>
            <ul class="nested"></ul>
          </li>
          <li><span class="caret"></span><input placeholder="Наименование" value="LAN"></input><button onclick='crFunc()'>+</button>
            <ul class="nested"></ul>
          </li>
        </ul>
      </li>  
    </ul>
  </li>
</ul>
</p>

<script>

function addEvLi(v) {
    v.addEventListener("click", function() {
      this.parentElement.querySelector(".nested").classList.toggle("active");
      this.classList.toggle("caret-down");
    });
}

function crEle(toggler) {
    var treeWidget = document.getElementById("myUL");
    var root = document.createElement('li');
    var span = document.createElement('span');
    var inp = document.createElement('input');
    var childs = document.createElement('ul');
    var crBtn = document.createElement('button');
    var rmBtn = document.createElement('button');
    //var child = document.createElement('li');
    //var child1 = document.createElement('li');
    inp.setAttribute("placeholder", "Наименование");
    span.className = "caret";
    crBtn.innerHTML = '+'
    rmBtn.innerHTML = '-'
    crBtn.setAttribute("onclick", "crFunc()");
    rmBtn.setAttribute("onclick", "rmFunc()");
    addEvLi(span);
    childs.className = "nested";
    //child.innerHTML = "тест";
    //child1.innerHTML = "тест1";
    treeWidget.appendChild(root);
    root.appendChild(span);
    root.appendChild(inp);
    root.appendChild(crBtn);
    root.appendChild(rmBtn);
    root.appendChild(childs);
    //childs.appendChild(child);
    //childs.appendChild(child1);

    //alert('OK!');

}

//crEle()

var toggler = document.getElementsByClassName("caret");
console.log(toggler);
var i;

for (i = 0; i < toggler.length; i++) {
    addEvLi(toggler[i]);
}

</script>

</body>
</html>

{% endblock %}

